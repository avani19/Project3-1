<template name="poll">
<div class="container">
<div class="row pollCard">
  <div class="col s12">
    <div class="row">
      <div class="card light-blue darken-4 col s12">
        <div class="card-content white-text">
          <span class="card-title">{{poll.question}}</span>
            <p class="pollCreated">Created by {{poll.user.email}} {{poll.createdAt}}
            </p>
            {{> shareit}}
        </div>
      </div>

      {{#if poll.usersVoteStatus}}
        <!-- Pie Chart is called here to render it on the browser -->
        <div class="col s5">
               {{>pieChart id=poll._id }}
        </div>
        <!-- End If user has voted -->
      {{else}}
        <div class="col s4 pollClicked">
          {{#each poll.choices}}
            <div class="choices col s9">
                <div id="{{ poll._id }}" class="voteButton btn"  choice-index="{{@index}}">{{text}}
                </div>
            </div>
          {{/each}}
        </div>

      <!-- End If user has NOT voted -->
      {{/if}}
    <!-- Comments Section -->
    <div class="col s5">
      <div class="comment-section">
        {{#unless poll.comments}}
          <div class="chip orange">No Recent Comments</div>
        {{else}}
          <div class="chip orange">Recent Comments</div>
            {{#each poll.comments}}
              <span class="commentName">{{poll.userId}}</span>
               <p class="comment">{{comment}}</p>
            {{/each}}
        {{/unless}}
      </div>
    </div>
  </div>
  </div>
 

            <!-- add comments -->
<div class='row'>
  <div class="col s12 submitComment">
    <div class="row">
      <form class="comment-form" data-poll-id="{{poll._id}}">
        <div class="commentInputSection col s9">
            <textarea id="comments" name="comment" placeholder="Write comments here..."></textarea>
        </div>
        <div class="col s3 commentInputSection">
          <button id="commentButton" class="btn waves-effect waves-light">Comment</button>
        </div>
      </form>
    </div>
  </div>
</div>
 </div>

<div class="row">
  <h2 class="center">Like this? Share this!</h2>
</div>

<div class="row">
<div class="col s12 m12 card-content white-text">
 <ul>
  <li><a href="https://www.pinterest.com/pin/create/button/"><img class="socialMediaIcon" src="https://cdn0.iconfinder.com/data/icons/Pinterest/512/Pinterest_Favicon.png" /></a></li>
  <li><a class="twitter-share-button social-buttons" href="https://twitter.com/intent/tweet?text=Check%20out%20this%20poll"><img class="socialMediaIcon" src="https://cdn1.iconfinder.com/data/icons/metro-ui-dock-icon-set--icons-by-dakirby/512/Twitter_alt.png" /></a></li>
  <li><!-- Your share button code -->
        <div class="fb-share-button" 
            data-href="/polls/{{poll._id}}"
            data-layout="button_count"> 
        </div></li>
  <!-- <li><div class="fb-share-button" data-href="https://pollythinks.herokuapp.com/" data-layout="button" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fpollythinks.herokuapp.com%2F&amp;src=sdkpreparse">Share</a></div></li> -->

        <!-- ! Load Facebook SDK for JavaScript -->
        <div id="fb-root"></div>
        <script>(function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1";
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script>
        
            <!-- If current user is logged in, show like icons -->
              {{#if currentUser}}
               <li> <div class="btn like-poll" data-id="{{poll._id}}">
                  <i class="material-icons">arrow_upward</i>({{poll.likes}})
                </div>
                </li>
                <li><div class="btn dislike-poll" data-id="{{poll._id}}"><i class="material-icons">arrow_downward</i>({{poll.dislikes}})
                </div>
                </li>
                <li><div class="btn fav-poll" data-id="{{this._id}}">
                      <i class="material-icons">favorite </i>({{this.fav}})
                 </div></li>

              {{/if}}
              </ul>
              <!-- Show delete button if current user is the creator or Admin-->
              <!-- {{#if isAdminOrCreator this}}
                  <div class="col s2 btn red delete-poll" data-id="{{poll._id}}">
                    <i class="material-icons">delete</i>
                  </div>
              {{/if}} -->
    </div>
  </div>
</div>

</template>